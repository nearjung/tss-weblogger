import{B as pe,E as Ce,F as Me,G as Ee,H as we,I as Se,J as _e,K as ye,L as Te,O as Fe,P as Ie,c as Z,d as $,e as H,f as z,q as ue,t as de}from"./chunk-CLKYMXGU.js";import{A as he,B as ve,D as be,s as me,x as ge,y as ce,z as fe}from"./chunk-X67DBSAQ.js";import{a as De,c as xe,e as Le}from"./chunk-33NYFVWI.js";import{$ as J,Aa as se,V as b,ca as Q,da as U,fa as X,ga as Y,ia as ee,ja as te,ka as re,la as ie,ma as C,na as M,oa as oe,pa as ne,va as ae,wa as le}from"./chunk-P5ZCIYX7.js";import"./chunk-OPS6CX6Y.js";import{Aa as v,E as w,Fb as G,Ga as q,Ka as u,Ma as R,P as S,Pa as O,Ra as _,Sa as D,Ta as x,Ua as i,V as d,Va as o,W as p,Wa as f,X as V,Y as k,_a as L,ac as j,bb as h,cb as y,cc as K,lb as A,mb as a,nb as T,ob as F,qa as m,r as W,ub as P,va as c,w as B}from"./chunk-EXJ2PHFM.js";import"./chunk-EQDQRRRY.js";var E=class n{ngOnInit(){}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=v({type:n,selectors:[["app-reset-warning-logger"]],features:[P([ue()])],decls:14,vars:0,consts:[["mat-dialog-title","",1,"text-center"],[1,"text-center"],[2,"color","#D88C0C"],[1,"row"],[1,"col-12","d-flex","justify-content","mt-2"],["type","button","matButton","","mat-dialog-close","",1,"btn","btn-danger"],["type","button","matButton","","mat-dialog-close","","cdkFocusInitial","",1,"btn","btn-success"]],template:function(e,r){e&1&&(i(0,"h1",0),a(1,` Warning Logger
`),o(),i(2,"mat-dialog-content")(3,"h5",1),a(4," \u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23 Reset \u0E04\u0E48\u0E32 "),i(5,"b",2),a(6,"Warning"),o(),a(7," \u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48 ? "),o(),i(8,"div",3)(9,"div",4)(10,"button",5),a(11,"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01"),o(),i(12,"button",6),a(13,"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19"),o()()()())},dependencies:[b,$,z,H,M],styles:["button[_ngcontent-%COMP%]{margin-right:8px}"],changeDetection:0})};function Ve(n,t){if(n&1&&(i(0,"mat-option",8),a(1),o()),n&2){let e=t.$implicit;u("value",e.value),m(),T(e.name)}}function ke(n,t){if(n&1&&(i(0,"div",29),f(1,"img",31),o()),n&2){let e=y().$implicit;u("matBadge",e.numberWarning)}}function qe(n,t){n&1&&(i(0,"div",30),f(1,"img",32),o())}function Re(n,t){if(n&1){let e=L();i(0,"div",20),h("click",function(){d(e);let l=y();return p(l.navigateToLoggerDetail())}),i(1,"mat-card",21)(2,"mat-card-content")(3,"div",18)(4,"div",22)(5,"h3",23)(6,"span",24),a(7),o()()(),i(8,"div",22)(9,"h3",23)(10,"span",24),a(11),o()()()(),f(12,"hr",25),i(13,"div",26)(14,"div",27)(15,"button",28),a(16," Offline "),o(),q(17,ke,2,1,"div",29)(18,qe,2,0,"div",30),o()()()()()}if(n&2){let e=t.$implicit;m(),R("alert",e.warningDetector)("warning",e.numberWarning<=3&&e.numberWarning>=1),m(6),F("No.",e.carNumber,""),m(4),T(e.loggerId),m(6),O(e.numberWarning>0?17:18)}}var Ne=class n{constructor(t,e,r,l,s,g){this.router=t;this.route=e;this.eventService=r;this.toastr=l;this.fb=s;this.cdr=g}subscriptions=[];allLoggers=[{id:1,firstName:"\u0E17\u0E14\u0E2A\u0E2D\u0E1A1",lastName:"Test01",carNumber:"1",loggerId:"Client121",createdDate:new Date(10/9/2025),numberWarning:2,warningDetector:!1},{id:4,firstName:"\u0E17\u0E14\u0E2A\u0E2D\u0E1A4",lastName:"Test04",carNumber:"4",loggerId:"Client124",createdDate:new Date(10/9/2025),numberWarning:0,warningDetector:!1}];dialog=S(Z);onShowAllLoggers=[];sortStatus="";showRoutePath=!0;filterLogList=[{name:"Logger \u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",value:"all"},{name:"\u0E40\u0E09\u0E1E\u0E32\u0E30 \u0E04\u0E27\u0E31\u0E19\u0E04\u0E33",value:"allSmokeDetect"},{name:"\u0E40\u0E09\u0E1E\u0E32\u0E30 Warning",value:"allWarning"}];filterLogger=new Y(["all"],{nonNullable:!0});wasAllSelected=this.filterLogger.value.includes("all");_formBuilder=S(C);filterIsAnd=!1;isChecked=!0;formGroup=this._formBuilder.group({sortType:[!0,J.requiredTrue]});ngOnInit(){let t=this.eventService.getLogger().pipe(B(1)).subscribe({next:r=>{this.allLoggers=r??[],this.updateView(this.allLoggers),this.cdr.markForCheck()},error:r=>console.error("Error loading matchList:",r)});this.subscriptions.push(t);let e=W(this.filterLogger.valueChanges.pipe(w(this.filterLogger.value)),this.formGroup.get("sortType").valueChanges.pipe(w(this.formGroup.value.sortType))).subscribe(()=>{this.updateView(this.allLoggers),this.cdr.markForCheck()});this.subscriptions.push(e),this.sortStatus=this.formGroup.value.sortType?"\u0E21\u0E32\u0E01 - \u0E19\u0E49\u0E2D\u0E22":"\u0E19\u0E49\u0E2D\u0E22 - \u0E21\u0E32\u0E01"}isAllSelected(){return this.filterLogger.value.includes("all")}matchesFilters(t,e){if(e.length===0||e.includes("all"))return!0;let r=[];return e.includes("allWarning")&&r.push(t.numberWarning>0&&!t.warningDetector),e.includes("allSmokeDetect")&&r.push(t.warningDetector===!0),this.filterIsAnd?r.every(Boolean):r.some(Boolean)}updateView(t=[]){let e=this.filterLogger.value??["all"],r=t.filter(s=>this.matchesFilters(s,e)),l=!!this.formGroup.value.sortType;r.sort((s,g)=>{let I=l?g.numberWarning-s.numberWarning:s.numberWarning-g.numberWarning;if(I!==0)return I;let N=Number(g.warningDetector)-Number(s.warningDetector);return N!==0?N:s.firstName.localeCompare(g.firstName,"th")}),this.onShowAllLoggers=[...r],this.sortStatus=l?"\u0E21\u0E32\u0E01 - \u0E19\u0E49\u0E2D\u0E22":"\u0E19\u0E49\u0E2D\u0E22 - \u0E21\u0E32\u0E01"}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}onSelectChange(t){let e=t.value||[],r=this.wasAllSelected;e.includes("all")&&e.length>1?r?this.filterLogger.setValue(e.filter(s=>s!=="all"),{emitEvent:!1}):this.filterLogger.setValue(["all"],{emitEvent:!1}):e.length==0&&this.filterLogger.setValue(["all"],{emitEvent:!1}),this.wasAllSelected=(this.filterLogger.value??e).includes("all"),this.updateView(this.allLoggers)}get allWarning(){return this.allLoggers.filter(t=>t.numberWarning>0)}onToggleSort(){let t=!!this.formGroup.value.sortType;this.sortStatus=t?"\u0E21\u0E32\u0E01 - \u0E19\u0E49\u0E2D\u0E22":"\u0E19\u0E49\u0E2D\u0E22 - \u0E21\u0E32\u0E01",this.updateView(this.allLoggers)}navigateToLoggerDetail(){this.router.navigate(["/pages","logger"])}navigateToResetLogger(t,e){let r=this.dialog.open(E,{enterAnimationDuration:t,exitAnimationDuration:e})}static \u0275fac=function(e){return new(e||n)(c(K),c(j),c(de),c(pe),c(C),c(G))};static \u0275cmp=v({type:n,selectors:[["app-dashboard"]],decls:28,vars:4,consts:[["menu","matMenu"],[1,"pt-2"],[1,"container"],[1,"row","w-100"],[1,"col-3","pt-2"],[1,"mat-input-form"],[1,"w-100"],["multiple","",3,"selectionChange","formControl"],[3,"value"],[1,"col-3","ps-0","pe-0","d-flex","align-items-center"],["ngNativeValidate","",1,"example-form",3,"formGroup"],["formControlName","sortType",3,"change"],[1,"offset-3","col-3","ps-0","pe-0","d-flex","align-items-center","justify-content-end"],["matButton","","type","button",1,"btn","btn-light",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","000"],["d","m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z"],["mat-menu-item","",3,"click"],[1,"container",2,"margin-top","20px"],[1,"row"],[1,"col-6","col-sm-4","col-lg-3","mt-3"],[1,"col-6","col-sm-4","col-lg-3","mt-3",3,"click"],["appearance","outlined",1,"logger-card"],[1,"col-12"],[2,"margin","0.5rem 0 0 0"],[1,"badge","text-bg-secondary","w-100"],[2,"margin","0.3rem 0"],[1,"row","justify-content-center"],[1,"col-6","mt-1","pe-0","d-flex","justify-content-center"],["type","button",1,"btn","btn-secondary","w-100"],["matBadgeOverlap","false",1,"demo-section",2,"width","27px",3,"matBadge"],["matBadgeOverlap","false",1,"demo-section",2,"width","33px"],["src","images/icon/image8.png",2,"border-radius","0","height","40px"],["src","images/icon/image6.png",2,"border-radius","0","height","40px","margin-left","10px"]],template:function(e,r){if(e&1){let l=L();i(0,"mat-toolbar",1)(1,"mat-toolbar-row")(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5)(6,"mat-form-field",6)(7,"mat-label"),a(8,"Filter"),o(),i(9,"mat-select",7),h("selectionChange",function(g){return d(l),p(r.onSelectChange(g))}),D(10,Ve,2,2,"mat-option",8,_),o()()()(),i(12,"div",9)(13,"form",10)(14,"mat-slide-toggle",11),h("change",function(){return d(l),p(r.onToggleSort())}),a(15),o()()(),i(16,"div",12)(17,"button",13),V(),i(18,"svg",14),f(19,"path",15),o()(),k(),i(20,"mat-menu",null,0)(22,"button",16),h("click",function(){return d(l),p(r.navigateToResetLogger("0ms","0ms"))}),a(23,"Reset Logger \u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14"),o()()()()()()(),i(24,"div",17)(25,"div",18),D(26,Re,19,7,"div",19,_),o()()}if(e&2){let l=A(21);m(9),u("formControl",r.filterLogger),m(),x(r.filterLogList),m(3),u("formGroup",r.formGroup),m(2),F("Warning ",r.sortStatus,""),m(2),u("matMenuTriggerFor",l),m(9),x(r.onShowAllLoggers)}},dependencies:[Le,De,xe,Fe,Ie,be,Te,ye,b,ve,he,fe,M,ee,Q,U,X,le,ae,ne,se,ce,ge,me,oe,te,re,ie,Me,Ce,_e,we,Ee,Se],styles:[".logger-card[_ngcontent-%COMP%]{max-width:400px}.logger-card-footer[_ngcontent-%COMP%]{padding:16px}mat-icon[_ngcontent-%COMP%]{font-size:20px}.mat-toolbar[_ngcontent-%COMP%]{background:#212529;color:#fff}.example-form[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin:8px 0;display:block}.logger-card.alert[_ngcontent-%COMP%]{padding:0;border:2px solid #EF4444;background-color:#611515;box-shadow:none;color:#fff}.logger-card.warning[_ngcontent-%COMP%]{padding:0;border:2px solid #D88C0C;box-shadow:none;color:#fff}"],changeDetection:0})};export{Ne as DashboardComponent};
